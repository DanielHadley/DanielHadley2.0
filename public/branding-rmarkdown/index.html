<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.36" />
  

  
  
  
  
    
      
    
  
  <meta name="description" content="At the 2018 RStudio conference in San Diego, my colleague Jon and I gave a talk about how we use R Markdown to quickly go from nothing, to analysis, to a branded report that we can pass off to clients. This workflow took some time to set up, but like most automation tasks, has ultimately saved us more time and headache than it cost. If you want to skip to the talk,">

  
  <link rel="alternate" hreflang="en-us" href="/branding-rmarkdown/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-56284042-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Daniel Hadley">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Daniel Hadley">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/branding-rmarkdown/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@danielphadley">
  <meta property="twitter:creator" content="@danielphadley">
  
  <meta property="og:site_name" content="Daniel Hadley">
  <meta property="og:url" content="/branding-rmarkdown/">
  <meta property="og:title" content="Branding and Automating with R Markdown | Daniel Hadley">
  <meta property="og:description" content="At the 2018 RStudio conference in San Diego, my colleague Jon and I gave a talk about how we use R Markdown to quickly go from nothing, to analysis, to a branded report that we can pass off to clients. This workflow took some time to set up, but like most automation tasks, has ultimately saved us more time and headache than it cost. If you want to skip to the talk,">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-03-27T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2018-03-27T00:00:00&#43;00:00">
  

  

  <title>Branding and Automating with R Markdown | Daniel Hadley</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Daniel Hadley</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#press">
            
            <span>Press</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Branding and Automating with R Markdown</h1>

    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2018-03-27 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Mar 27, 2018
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/branding-rmarkdown/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r">R</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Branding%20and%20Automating%20with%20R%20Markdown&amp;url=%2fbranding-rmarkdown%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fbranding-rmarkdown%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fbranding-rmarkdown%2f&amp;title=Branding%20and%20Automating%20with%20R%20Markdown"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fbranding-rmarkdown%2f&amp;title=Branding%20and%20Automating%20with%20R%20Markdown"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Branding%20and%20Automating%20with%20R%20Markdown&amp;body=%2fbranding-rmarkdown%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      <p>At the 2018 RStudio conference in San Diego, my colleague Jon and I gave a talk about how we use R Markdown to quickly go from nothing, to analysis, to a branded report that we can pass off to clients. This workflow took some time to set up, but like most automation tasks, has ultimately saved us more time and headache than it cost. If you want to skip to the talk,</p>
<ul>
<li><a href="http://rpubs.com/jzadra/rconf2018">Here</a> are the slides</li>
<li><a href="https://github.com/Sorenson-Impact/rmarkdown-branding-talk/">Here</a> is the repo with a short and long version</li>
<li><a href="https://www.youtube.com/watch?time_continue=21329&amp;v=ogy7rHWlsQ8">Here</a> is a video (complete with my cringeworthy Hadley joke)</li>
<li>And <a href="https://github.com/Sorenson-Impact/sorensonimpact">here</a> is the package we describe</li>
</ul>
<div id="ten-years-ago" class="section level2">
<h2>Ten Years Ago</h2>
<p>These talks describe our current workflow, but I like to compare the present to the past. I have no way to quantify this, but I feel like R is uniqe in how quickly its packages and IDE have evolved the last few years. I’m sure there are other examples of this, but R must be in the upper quartile of ancillary developments, e.g., the Tidyverse, RStudio v1, Shiny, and our topic, R Markdown. In evolutionary terms, we skipped from Nintendo to Xbox One.</p>
<div class="figure">
<img src="https://media.giphy.com/media/l41YlnP9H2SFPCdPi/giphy.gif" />

</div>
<p>When I began as an analyst in local government, there was no easy way to go from code to output. It was common to create a bunch of graphs with a vanilla R script and then painstakingly add them to either a word document or PowerPoint. There were, of course, those who mastered LaTeX as part a painful dissertation writing process, but most people divided workflows between coding and presentation.</p>
<p>Then came Knitr. Yihui’s work to integrate R with HTML, LaTeX, Markdown and other formats opened up a plethora of possibilities. For instance, <a href="http://danielphadley.com/How-To-Dashboard-R/">I found a way</a> to create a dashboard by knitting analysis into Rhtml. It was difficult to integrate the two, writing <code>&lt;!--rinline I(data) --&gt;</code> everywhere that took a vector. But that simple method has sustained a <a href="http://archive.somervillema.gov//dashboard/daily.html">city dashboard</a> for years now. Without Yihui, I don’t think any of this would have been possible.</p>
<p>Simultaneously, data science was advancing with iPython notebooks. For the first time, the notebook format closely integrated code and output, allowing analysts to see results in-line and easily share their work as HTML files. Modeled after the scientific process, notebooks took off, despite their challenges. When R Markdown Notebooks came along and <a href="http://danielphadley.com/Jupyter-to-Rmarkdown/">solved things</a> like version control, it was a monumental improvement.</p>
</div>
<div id="branding" class="section level2">
<h2>Branding</h2>
<p>Today with RMarkdown in RStudio, it is easy to turn your analysis into a presentation. We use <a href="https://rmarkdown.rstudio.com/ioslides_presentation_format.html">ioslides</a> with a <a href="https://github.com/Sorenson-Impact/rmarkdown-branding-talk/blob/master/SI_Rmarkdown_Talk_Rconf/SI_Rmarkdown_Talk_Rconf.Rmd">little javascript</a> to brand them. But in San Diego, Yihui said that they are close to adding PowerPoint as an output format.</p>
<p>For reports, we use Word because it is very simple to customize things like headers, fonts, and colors. In the talk we gave, I went over an example of how to use a <a href="https://stackoverflow.com/questions/24672111/how-to-add-a-page-break-in-word-document-generated-by-rstudio-markdown">Word template</a> to include page breaks. This is part of a <a href="https://rmarkdown.rstudio.com/articles_docx.html">more general</a> approach to branding that involves iterating on a template until your document looks just right.</p>
<div id="branding-a-website" class="section level3">
<h3>Branding a Website</h3>
<p>Blogdown is the apotheosis of branding with Rmd. Granted, my site looks similar to the thousands of other websites based on <a href="https://themes.gohugo.io/academic/">Hugo Academic</a>. But that’s only because it is insanely easy to get started with Blogdown, in general, and the Academic theme in particular. All it takes is this line of code: <code>blogdown::new_site(theme = &quot;gcushen/hugo-academic&quot;)</code>. So far, I have not made any changes to CSS - just a replaced a few hero images and icons - and it already feels unique.</p>
<p>There are others who have done a much better job at putting their own mark on Hugo themes. My favorite is [Amber Thomas’ site])(<a href="https://amber.rbind.io/" class="uri">https://amber.rbind.io/</a>). She is a contributing author to the Blogdown book with a keen eye for design.</p>
</div>
</div>
<div id="automating" class="section level2">
<h2>Automating</h2>
<p>For presentations at work, my colleagues and I fell into a routine. We would copy and paste Rmd documents, adding customizations to the header every time we wanted a new feature. After a while, though, we found that the document headers were growing out of control. There were more than 100 lines that did things like,</p>
<ul>
<li>Load libraries</li>
<li>Set knitr/rmarkdown options</li>
<li>Set directories</li>
<li>Define branded color names</li>
<li>Customize ggplot themes and geoms</li>
<li>Define custom functions</li>
</ul>
<p>This made it difficult to create a single report, let alone automate dozens of them.</p>
<p>To remedy the problem, my colleague Jon created an R package with all of our branding and custom functions. This allowed us to take advantage of the <code>draft</code> function and the <a href="https://rmarkdown.rstudio.com/developer_document_templates.html">RStudio features</a> that support document templates.</p>
<p>This video shows how quickly and easily we can create a new report now:</p>
<video width="320" height="240" controls>
<source src="/img/draft_functions_large.mp4" type="video/mp4">
</video>
<p>With all of that in place, it is much easier to use a single template to create a series of reports. This <code>for</code> loop is what we used when we were requested to build a unique report showing data trends in every county in Utah.</p>
<pre class="r"><code>for (county in unique(utah$County)) {
  try(render(&#39;./county_report.Rmd&#39;,
             output_file = paste(county, &quot;County Report.docx&quot;),
             output_dir = &quot;./County_Reports/&quot;))
}</code></pre>
<p>To summarize, it is easier than ever to brand your analysis with Rmarkdown. Creating a custom package will allow you to cut down on clutter, and make templates easily accessible. From there, it is simple to automate reports that output to Word, Ioslides, HTML, or any of a dozen other formats.</p>
</div>

    </div>

    


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/rmarkdown">Rmarkdown</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/work">work</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/automation">automation</a>
  
</div>




    
    
    <div class="article-widget">
      <div class="hr-light"></div>
      <h3>Related</h3>
      <ul>
        
        <li><a href="/jupyter-to-rmarkdown/">From Jupyter Notebooks to R Markdown</a></li>
        
        <li><a href="/ggplot-logo/">How to Add a Logo to ggplot by Magick</a></li>
        
        <li><a href="/how-to-dashboard-r/">How to Build a Data Dashboard using R (knitr), HTML, and Javascript (e.g.,Highcharts)</a></li>
        
        <li><a href="/mass-election-analysis/">Data Analysis of the 2014 Mass. Gubernatorial Election</a></li>
        
        <li><a href="/automate-map-making/">How To Automate Map Making in R</a></li>
        
      </ul>
    </div>
    

    

    
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "danielphadley" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="//danielphadley.disqus.com/count.js" async></script>
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

