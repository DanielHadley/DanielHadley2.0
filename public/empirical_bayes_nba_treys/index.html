<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.36" />
  

  
  
  
  
    
      
    
  
  <meta name="description" content="All sports statistics are imperfect measures of a player’s performance. At best, they show relative differences in how well athletes shoot, steal, and rebound. At worst, they are marred by rule changes and outside factors that either exaggerate or handicap certain subgroups of players.
The NBA’s measure for three-point accuracy is one of worst kinds of the latter. Between 1995 and 1997, the NBA changed the distance of the three-point line, biasing all future comparisons between generations of players.">

  
  <link rel="alternate" hreflang="en-us" href="/empirical_bayes_nba_treys/">

  


  

  
  
  <meta name="theme-color" content="#0095eb">
  
  
  
  
    
  
  
    
    
      
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
      
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-56284042-1', 'auto');
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="Daniel Hadley">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="Daniel Hadley">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/empirical_bayes_nba_treys/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@danielphadley">
  <meta property="twitter:creator" content="@danielphadley">
  
  <meta property="og:site_name" content="Daniel Hadley">
  <meta property="og:url" content="/empirical_bayes_nba_treys/">
  <meta property="og:title" content="Empirical Bayes to Estimate NBA Treys | Daniel Hadley">
  <meta property="og:description" content="All sports statistics are imperfect measures of a player’s performance. At best, they show relative differences in how well athletes shoot, steal, and rebound. At worst, they are marred by rule changes and outside factors that either exaggerate or handicap certain subgroups of players.
The NBA’s measure for three-point accuracy is one of worst kinds of the latter. Between 1995 and 1997, the NBA changed the distance of the three-point line, biasing all future comparisons between generations of players.">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2017-12-28T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2017-12-28T00:00:00&#43;00:00">
  

  

  <title>Empirical Bayes to Estimate NBA Treys | Daniel Hadley</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Daniel Hadley</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#projects">
            
            <span>Projects</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#press">
            
            <span>Press</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  


  <div class="article-container">
    <h1 itemprop="name">Empirical Bayes to Estimate NBA Treys</h1>

    

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-12-28 00:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Dec 28, 2017
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    2 min read
  </span>
  

  
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="/categories/r">R</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Empirical%20Bayes%20to%20Estimate%20NBA%20Treys&amp;url=%2fempirical_bayes_nba_treys%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fempirical_bayes_nba_treys%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fempirical_bayes_nba_treys%2f&amp;title=Empirical%20Bayes%20to%20Estimate%20NBA%20Treys"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fempirical_bayes_nba_treys%2f&amp;title=Empirical%20Bayes%20to%20Estimate%20NBA%20Treys"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Empirical%20Bayes%20to%20Estimate%20NBA%20Treys&amp;body=%2fempirical_bayes_nba_treys%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>


    <div class="article-style" itemprop="articleBody">
      <p>All sports statistics are imperfect measures of a player’s performance. At best, they show relative differences in how well athletes shoot, steal, and rebound. At worst, they are marred by rule changes and outside factors that either exaggerate or handicap certain subgroups of players.</p>
<p>The NBA’s measure for three-point accuracy is one of worst kinds of the latter. Between 1995 and 1997, the NBA changed the distance of the three-point line, biasing all future comparisons between generations of players. During those years, it was as though we changed the distance of marathons to 21 miles <em>and kept all of the fastest records</em>.</p>
<p>What follows is an attemt to use a method called empirical Bayes estimation to rank the most accurate three-point shooters of all time. What makes this different, however, is that I base my estimation on all of the available data <em>except for the seasons where the line was changed</em>.</p>
<p><img src="/post/empirical_bayes_nba_treys_files/figure-html/first_graph-1.png" width="672" /></p>
<pre class="r"><code>basic &lt;- threes %&gt;% 
  group_by(player_id) %&gt;% 
  summarise(threes_made = sum(threes_made), threes_attempted = sum(threes_attempted),
            Player = Player[1]) %&gt;% 
  mutate(three_pct = threes_made / threes_attempted) %&gt;% 
  add_ebb_estimate(threes_made, threes_attempted, prior_subset = threes_made &gt; 50)

basic %&gt;% 
  ggplot(aes(.raw, .fitted, color = threes_attempted)) +
  geom_point()</code></pre>
<pre><code>## Warning: Removed 387 rows containing missing values (geom_point).</code></pre>
<p><img src="/post/empirical_bayes_nba_treys_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<pre class="r"><code>basic %&gt;%
  arrange(-.fitted) %&gt;% 
  top_n(20, wt = .fitted) %&gt;% 
  mutate(rank = row_number()) %&gt;% 
  rename(&#39;Measured rate&#39; = three_pct, &#39;Empirical Bayes estimate&#39; = .fitted) %&gt;% 
  gather(type, rate, `Measured rate`, `Empirical Bayes estimate`) %&gt;%
  ggplot(aes(rate, reorder(Player, -rank), color = type)) +
  geom_errorbarh(aes(xmin = .low, xmax = .high), color = &quot;gray50&quot;) +
  geom_point(size = 3) +
  labs(x = &quot;Three Point %&quot;,
       y = NULL, title = &quot;Measured Rates, Empirical Bayesian Estimates, and Credible Intervals&quot;) +  theme_minimal() +
  theme(legend.title=element_blank())</code></pre>
<p><img src="/post/empirical_bayes_nba_treys_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<pre class="r"><code>no_line &lt;- threes %&gt;% 
  mutate(line_change = case_when(season &gt;= 1995 &amp; season &lt;= 1997 ~ &quot;during&quot;,
                                 season &lt; 1995 ~ &quot;before&quot;,
                                 TRUE ~ &quot;after&quot;)) %&gt;% 
  filter(line_change != &quot;during&quot;) %&gt;% 
  group_by(player_id) %&gt;% 
  summarise(threes_made = sum(threes_made), threes_attempted = sum(threes_attempted),
            Player = Player[1], season = round(mean(season))) %&gt;% 
  mutate(three_pct = threes_made / threes_attempted) %&gt;% 
  filter(threes_made &gt;= 7) %&gt;% 
  add_ebb_estimate(threes_made, threes_attempted, method = &quot;gamlss&quot;, 
                   mu_predictors = ~ season + log10(threes_attempted)) 

no_line %&gt;% 
  ggplot(aes(.raw, .fitted, color = threes_attempted)) +
  geom_point()</code></pre>
<p><img src="/post/empirical_bayes_nba_treys_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<pre class="r"><code>no_line %&gt;%
  arrange(-.fitted) %&gt;% 
  top_n(20, wt = .fitted) %&gt;% 
  mutate(rank = row_number()) %&gt;% 
  rename(&#39;Measured rate&#39; = three_pct, &#39;Empirical Bayes estimate&#39; = .fitted) %&gt;% 
  gather(type, rate, `Measured rate`, `Empirical Bayes estimate`) %&gt;%
  ggplot(aes(rate, reorder(Player, -rank), color = type)) +
  geom_errorbarh(aes(xmin = .low, xmax = .high), color = &quot;gray50&quot;) +
  geom_point(size = 3) +
  labs(x = &quot;Three Point %&quot;,
       y = NULL, title = &quot;Measured Rates, Empirical Bayesian Estimates, and Credible Intervals&quot;) +  theme_minimal() +
  theme(legend.title=element_blank())</code></pre>
<p><img src="/post/empirical_bayes_nba_treys_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>

    </div>

    


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="/tags/probability">probability</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/puzzle">puzzle</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/bayesian">bayesian</a>
  
  <a class="btn btn-primary btn-outline" href="/tags/personal">personal</a>
  
</div>




    
    
    <div class="article-widget">
      <div class="hr-light"></div>
      <h3>Related</h3>
      <ul>
        
        <li><a href="/bayes-538/">Bayes&#39; Puzzle Powers</a></li>
        
        <li><a href="/deranged-x-mas/">Deranged X-Mas - a Gift Exchange Puzzle</a></li>
        
        <li><a href="/statwars/">What the Critics Got Wrong About Star Wars</a></li>
        
        <li><a href="/data-science-vs-city-rats/">Data Science vs City Rats</a></li>
        
        <li><a href="/youtube/">The most-viewed non-music YouTube videos</a></li>
        
      </ul>
    </div>
    

    

    


  </div>
</article>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018 &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Cite</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> Copy
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha512-3P8rXCuGJdNZOnUx/03c1jOTnMn3rP63nBip5gOP2qmUh5YAdVAvFZ1E+QLZZbC1rtMrQb+mah3AfYW11RUrWA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    

  </body>
</html>

